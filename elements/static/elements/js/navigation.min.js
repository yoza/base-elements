if(!jQuery){jQuery=django.jQuery}var NavigationNested=Nested.extend({start:function(a){a=new Event(a);if(a.target.nodeName=="SPAN"&&a.target.className=="movespan"){this.parent(a)}}});window.addEvent("domready",function(){var b=new NavigationNested("navigation",{collapse:false,onStart:function(d){d.addClass("drag")},onComplete:function(d){d.removeClass("drag");var e=b.serialize();if(Json.toString(b.lastSerialized)!=Json.toString(e)){d.addClass("changed");jQuery("li.changed").find("input.action-select").attr("checked",true)}this.lastSerialized=e}});var c;var a=$("navigation-form");a.addEvent("submit",function(){a.adopt(new Element("input").setProperties({type:"hidden",name:"navigation",value:Json.toString(b.lastSerialized)}))});$$("#navigation .toolbox").addEvent("click",function(d){});$$("#navigation li>a").addEvent("mousedown",function(d){c=new Date().getTime()});$$("#navigation li>a").addEvent("click",function(d){var e=(new Date()-c);if(e>400){d.preventDefault()}});b.lastSerialized=b.serialize()});