{% load i18n %}
{% get_current_language as lang %}
{% block tinymce_file_browser %}
<script type="text/javascript">

function CustomFileBrowser(field_name, url, type, win) {

    var cmsURL = "/admin/filebrowser/?pop=2";
    cmsURL = cmsURL + "&type=" + type;

    tinyMCE.activeEditor.windowManager.open({
        file: cmsURL,
        width: 820,  // Your dimensions may differ - toy around with them!
        height: 500,
        resizable: "yes",
        scrollbars: "yes",
        inline: "no",  // This parameter only has an effect if you use the inlinepopups plugin!
        close_previous: "no"
    }, {
        window: win,
        input: field_name,
        editor_id: tinyMCE.selectedInstance.editorId
    });
    return false;
}

</script>
{% endblock %}

{% block tinymce_config %}
<script type="text/javascript">
tinymce_config = {
  elements : "id_{{name}}",
  language : "{{lang|default:language}}",
  lang_list :"{{lang_list}}",
  mode: "exact",
  theme: "advanced",
  content_css : "{{content_css}}",
  skin: "o2k7",
  dialog_type: "modal",
  object_resizing: true,
  cleanup_on_startup: true,
  forced_root_block: "p",
  remove_trailing_nbsp: true,
  theme_advanced_toolbar_location: "top",
  theme_advanced_toolbar_align: "left",
  theme_advanced_statusbar_location: "",
  theme_advanced_buttons1: "formatselect,bold,italic,underline,sub,sup,bullist,numlist,undo,redo,link,unlink,image,visualchars,fullscreen,pasteword,search,replace,charmap",
  theme_advanced_buttons2: "styleselect",
  theme_advanced_buttons3: "",
  theme_advanced_path: false,
  theme_advanced_blockformats: "p,h2,h3,h4",
  theme_advanced_styles: "",
  width: '700',
  height: '200',
  plugins: "advimage,advlink,fullscreen,visualchars,paste,media,table,searchreplace",
  advimage_styles: "",
  advlink_styles: "",
  advimage_update_dimensions_onchange: true,
  file_browser_callback: "CustomFileBrowser",
  relative_urls: false,
  valid_elements : "" +
    "-p," +
    "a[href|target=_blank|class]," +
    "-strong/-b," +
	"-em/-i," +
    "-u," +
    "-ol," +
	"-ul," +
	"-li," +
    "img[class|src|alt=|width|height]," +
    "-h2,-h3,-h4,",
    extended_valid_elements: "" +
    "a[name|class|href|target|title|onclick|style|id]," +
    "img[class|style|src|border=0|alt|title|hspace|vspace|width|height|align|onmouseover|onmouseout|name|obj|param|embed]," +
    "video[id|src|class]," +
    "object[class|style|type|data|id|classid|codebase|width|height|align]," +
    "param[name|value|_value|id|valuetype|type]," +
    "embed[quality|type|pluginspage|width|height|src|align|scale|wmode|salign|name|background|menu]," +
    "hr[class|width|size|noshade]," +
    "quote[class|align|style]," +
    "blockquote[class|align|style]," +
    "q[class|align|style]" +
    "-p[class|style]," +
    "h2[class<clearfix],h3[class<clearfix],h4[class<clearfix]," +
    "ul[class<clearfix],ol[class<clearfix]"
};
</script>
{% endblock %}

{% block tinymce_init %}
<script type="text/javascript">
tinyMCE.init(tinymce_config);
</script>
{% endblock %}
